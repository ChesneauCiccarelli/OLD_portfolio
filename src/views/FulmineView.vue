<template>
  <div class="relative">

    <div class="absolute left-[50%]">
      <div class="scrolling_rainbow">
        <div id="scrolling_rainbow-content">
          <div class="scrolling_rainbow-scroll z-[2]">
            <svg viewBox="0 0 24 24">
              <line class="st1" x1="12" y1="1" x2="12" y2="22.5" />
              <line class="st1" x1="12.1" y1="22.4" x2="18.9" y2="15.6" />
              <line class="st1" x1="11.9" y1="22.4" x2="5.1" y2="15.6" />
            </svg>
          </div>
        </div>
      </div>
    </div>

    <div class="z-1">
      <canvas id="project_title-canvas"></canvas>
    </div>

    <section class="project section_A mt-0">
      <div class="project_container">
        <div class="z-10">
          <h1 class="right">Fulmine</h1>
          <h2 class="right">Brand Style Guide</h2>
          <p class="right">This Italian car dealer aims to move the idea of luxurious cars to a new era. This brand wants to development new healthier and environmentally friendly driving styles and way of living. They put the future at the center point of their evolution with responsible electric cars. They want to reduce environmental pollution and prevent global warming, as well as diversifying energy sources from petroleum and fossil energies.</p>
          <p class="project_subtitle right">¿What is this project about?</p>
        </div>
        <div></div>
      </div>
    </section>

    <section class="project section_B">
      <div class="project_container">
        <div></div>
        <div class="z-10">
          <h1 class="left">Sharing values</h1>
          <p class="left">Brands often like to share their values because it helps them connect with their audience on a deeper level. When a brand shares its values, it shows what it stands for and what it believes in. This can create an emotional connection with consumers who share similar values, leading to increased loyalty and advocacy.</p>
          <p class="project_subtitle left">¿Connecting with consumers?</p>
        </div>
      </div>
    </section>

    <section class="project section_A">
      <div class="project_container">
        <div class="z-10">
          <h1 class="right">The name</h1>
          <p class="right">The typographic logo of the Fulmine brand represents the whole history of the brand house. It reflects the identity, personality and values we want to share with the world. All this is accentuated with the lightning bolt, our graphic element that reminds us of our ecological and sustainable values. The name is often the first point of contact between the brand and the consumer, and it can have a significant impact on the consumer's perception of the brand. A brand name should be memorable, distinctive, and easy to pronounce and spell. It should also be unique enough to distinguish the brand from its competitors.</p>
          <p class="project_subtitle right">¿What is a name?</p>
        </div>
        <div class="z-[1]">
          <img class="IMG_project scale-75 left" src="../../public/img/ful-logogap.png" alt="Fulmine Sizing">
        </div>
      </div>
    </section>

    <section class="section_C">
      <div class="section_C-content">
        <div class="section_C-1 z-10">
          <h1 class="right">Guidelines</h1>
          <p class="right">For each visual element you have identified, create clear guidelines for its use. Determine the minimum size for your logo, the exact colours you use and the fonts you use ...</p>
        </div>
        <div class="z-[1]] up">
          <img src="../../public/img/ful-bsg.png" alt="Type Artwork Fulmine BSG">
        </div>
        <div class="section_C-2 z-10">
          <h1 class="left">Applications</h1>
          <p class="left">Identify the media on which your brand will be applied, such as print, social media and the website. For each medium, provide specific guidelines for the use of your brand elements.</p>
        </div>
      </div>
    </section>

    <section class="project section_B">
      <div class="project_container">
        <div class="z-[1]">
            <img class="IMG_project right" src="../../public/img/ful-keywords.png" alt="Keywords Fulmine">
          </div>
        <div class="z-10">
          <h1 class="left">Keywords</h1>
          <p class="left">Using keywords helps establish a strong brand because they are a powerful tool for communicating your brand message to your target audience. Keywords are the words or phrases that people use to search for information online, and they help to define the essence of your brand.</p>
          <p class="project_subtitle left">¿Differentiate your brand?</p>
        </div>
      </div>
    </section>

    <section class="project section_A">
      <div class="project_container">
        <div class="z-10">
          <h1 class="right">Colors</h1>
          <p class="right">The colors of a brand can represent different things depending on the brand's identity and message. However, generally speaking, colors can evoke specific emotions or convey certain meanings to consumers. It's important to note that colors can have different meanings in different cultures, so a brand's choice of colors should take this into consideration if they operate in multiple markets. Overall, the colors of a brand are an essential aspect of its visual identity and can influence consumer perceptions and behavior.</p>
          <p class="project_subtitle right">¿Represeting your values?</p>
        </div>
        <div class="z-[1] left">
          <img class="IMG_project" src="../../public/img/ful-colors.png" alt="Couleurs de fulmine">
        </div>
      </div>
    </section>

    <section class="project section_B">
      <div class="project_container">
        <div class="z-[1]">
          <img class="IMG_project right" src="../../public/img/ful-type.png" alt="Typographie Fulmine Brand">
        </div>
        <div class="z-10">
          <h1 class="left">Typography</h1>
          <p class="left">Typography plays an important role in shaping a brand's identity and image. It helps to establish a visual language that communicates a brand's personality, values, and message to its audience. A well-designed typography system can create a consistent and memorable brand experience across all touchpoints, from the logo to packaging, advertising, and digital channels.</p>
          <p class="project_subtitle left">¿Representing your vision?</p>
        </div>
      </div>
    </section>

    <div class="section_D z-10 section_D--mobile">
      <div class="section_D-container">
        <div class="section_D-item">
          <img class="IMG_project z-[1]" src="../../public/img/ful-indesign.png" alt="Vue Js integration" />
          <div class="IMG_project-description">
            <h1>Indesign</h1>
            <p>Brand Style Guide created with InDesign, a desktop publishing software</p>
          </div>
        </div>
      </div>
      <div class="section_D-container">
        <div class="section_D-item">
          <img class="IMG_project z-[1]" src="../../public/img/ful-mockup.png" alt="Fulmine merch" />
          <div class="IMG_project-description">
            <h1>Mock up</h1>
            <p>Sharing your brand through merchandising. Respect the guidelines</p>
          </div>
        </div>
      </div>
      <div class="section_D-container">
        <div class="section_D-item">
          <img class="IMG_project z-[1]" src="../../public/img/ful-moodboard.png" alt="Moodboard Fulmine" />
          <div class="IMG_project-description">
            <h1>Develop Ideas</h1>
            <p>Use a Moodboard to convey the overall aesthetic, style, and feel of a project</p>
          </div>
        </div>
      </div>
      <div class="section_D-container">
        <div class="section_D-item">
          <img class="IMG_project z-[1]" src="../../public/img/ful-ill.png" alt="Illsutrator" />
          <div class="IMG_project-description">
            <h1>Illustrator</h1>
            <p>Creating and sharing your brand with Illustrator, a vector graphics editor</p>
          </div>
        </div>
      </div>
    </div>

    <div id="wrap" class="section_D z-10 section_D--desktop">
      <div class="section_D-container">
        <div class="section_D-item">
          <img class="IMG_project z-[1]" src="../../public/img/ful-indesign.png" alt="Vue Js integration" />
          <div class="IMG_project-description">
            <h1>Indesign</h1>
            <p>Brand Style Guide created with InDesign, a desktop publishing software</p>
          </div>
        </div>
      </div>
      <div class="section_D-container">
        <div class="section_D-item">
          <img class="IMG_project z-[1]" src="../../public/img/dd-figma.png" alt="Figma Layout" />
          <div class="IMG_project-description">
            <h1>Layout model</h1>
            <p>Made entirely with Figma software (Design System, Layout, Prototyping)</p>
          </div>
        </div>
      </div>
      <div class="section_D-container">
        <div class="section_D-item">
          <img class="IMG_project z-[1]" src="../../public/img/ful-moodboard.png" alt="Moodboard Fulmine" />
          <div class="IMG_project-description">
            <h1>Develop Ideas</h1>
            <p>Use a Moodboard to convey the overall aesthetic, style, and feel of a project</p>
          </div>
        </div>
      </div>
      <div class="section_D-container">
        <div class="section_D-item">
          <img class="IMG_project z-[1]" src="../../public/img/ful-ill.png" alt="Illsutrator" />
          <div class="IMG_project-description">
            <h1>Illustrator</h1>
            <p>Creating and sharing your brand with Illustrator, a vector graphics editor</p>
          </div>
        </div>
      </div>
    </div>

    <section class="project section_A">
      <div class="project_container">
        <div class="z-10">
          <h1 class="right">The experience </h1>
          <p class="right">One of the many branding projects I did during my semester at <a class="underlinelink" href="https://www.vaniercollege.qc.ca/" target="_blank" rel="noopener noreferrer">Vanier College</a> in Montreal, in <a class="underlinelink" href="https://www.behance.net/robertyoung?tracking_source=search_users%7Crobert%20young" target="_blank" rel="noopener noreferrer">Mr. Robert Young</a>'s class. The creation of a brand must respect a number of factors explained throughout this presentation, they are the keys to the success of a brand that can stand out and evolve in the world.</p>
          <p class="project_subtitle right">¿build up your competence?</p>
        </div>
        <div></div>
      </div>
    </section>

    <section class="project section_B">
      <div class="project_container">
        <div></div>
        <div class="z-10">
          <h1 class="left">Feedback</h1>
          <p class="left">A project that gave me a lot of knowledge on graphic design software such as Indesign and Illustrator. The purpose of brand guidelines is to ensure consistency and coherence in how a brand is perceived and represented across all channels and touchpoints, both online and offline. By providing clear guidelines for how the brand should be presented, it helps to build brand recognition and trust, and ensures that the brand is accurately and consistently portrayed to its audience.</p>
          <p class="project_subtitle left">¿What are Brand Guidelines?</p>
        </div>
      </div>
    </section>

    <div class="up">
      <a class="BTN_glitch faded z-10" href="../../public/files/Brand guide_Lilian_Chesneau.pdf" download="Fulmine_BrandStyleGuide">Download the product</a>
    </div>

    <div class="m-auto text-center mt-[10rem] up">
      <RouterLink to="/">
        <button class="m-auto z-10">
          <span>Other projects</span>
          <div class="BTN_liquid"></div>
        </button>
      </RouterLink>
    </div>

    <p class="credits z-0">Fulmine<br />Lilian Chesneau</p>
  </div>
</template>

<script>
import project from "../components/Projets.vue"
import { gsap } from "gsap";
import * as THREE from 'three';
import "https://ajax.googleapis.com/ajax/libs/webfont/1.6.26/webfont.js"
import $ from "jquery";
import { ScrollTrigger } from "gsap/ScrollTrigger";
import 'https://cdnjs.cloudflare.com/ajax/libs/simplex-noise/2.4.0/simplex-noise.min.js';

export default {
  components: {
    project,
  },
  mounted() {

    /* ===== Scrolling Rainbow ===== */
    gsap.registerPlugin(ScrollTrigger);
    const content = document.querySelector('#scrolling_rainbow-content');

    /* ===== Noise ===== */
    const simplex = new SimplexNoise();

    const tailleMax = $('html').height();
    const numero = tailleMax + (tailleMax / 5.5);

    for (let i = 0; i < numero; i++) {
      // créer un nouveau cercle
      const div = document.createElement('div');
      div.classList.add('circle');
      // générer les valeurs de bruit pour les transformations CSS
      const n1 = simplex.noise2D(i * 0.003, i * 0.0033);
      const n2 = simplex.noise2D(i * 0.002, i * 0.001);
      // définir les styles CSS
      const style = {
        transform: `translate(${n2 * 100}px) rotate(${n2 * 270}deg) scale(${3 + n1 * 2}, ${3 + n2 * 2})`,
        boxShadow: `0 0 0 .2px hsla(${Math.floor(i * 0.3)}, 70%, 70%, .6)`
      };
      Object.assign(div.style, style);
      // ajouter le cercle au conteneur
      content.appendChild(div);
      // vérifier si le conteneur est plein
      if (content.children.length === numero) {
        break; // arrêter la boucle
      }
    }
    const Circles = document.querySelectorAll('.circle');
    const main = gsap.timeline({
      scrollTrigger: {
        scrub: .7,
        start: "top 40%",
        end: "bottom bottom"
      }
    });
    Circles.forEach(circle => {
      main.to(circle, {
        opacity: 1
      });
    });



    /* ===== Project Title Animation ===== */
    // load webfont from Google Fonts
    WebFont.load({
      google: {
        families: ['Major Mono Display']
      },

      classes: false,
      active: () => {
        createCanvas();
        updateCanvas();
      }
    });
    // vertex shader
    const vertexShader = `
    uniform mat4 modelViewMatrix;
    uniform mat4 projectionMatrix;
    uniform float time;
    uniform float index;
    uniform float divisions;
    uniform float tOffsetX;
    uniform vec4 tween;
    attribute vec3 position;
    attribute vec2 uv;
    varying vec2 vUv;

    mat2 scale2D(vec2 scale) {
    return mat2(scale.x, 0.0, 0.0, scale.y);
    }

    void main() {
    vUv = uv;
    vec3 pos = position;

    float scaleX = tween.x;
    pos.x += tOffsetX;
    pos.xy *= scale2D(vec2(scaleX, 1.0));
    pos.x -= tOffsetX;

    gl_Position = projectionMatrix * modelViewMatrix * vec4(pos, 1.0);
    }
    `;
    // fragment shader
    const fragmentShader = `
    precision highp float;

    uniform sampler2D texture;
    uniform float time;
    uniform float index;
    uniform float divisions;
    uniform vec4 tween;
    varying vec2 vUv;

    void main() {
    vec2 uv = vUv;
    float startV = index * (1.0 / divisions);
    vec2 tuv = vec2(uv.x, startV + uv.y * (1.0 / divisions));

    vec4 color = texture2D(texture, tuv);

    gl_FragColor = color;
    //gl_FragColor = vec4(vec3(tuv.y), 1.0);
    }
    `;
    // general settings
    const width = window.innerWidth;
    const height = window.innerHeight;
    const aspectRatio = width / height;
    const dpr = Math.min(window.devicePixelRatio, 2);
    const sceneWidth = 2;
    const sceneHeight = sceneWidth / aspectRatio;
    let scene, camera, renderer;
    // title settings
    const titleWidth = 2.0;
    const titleHeight = 0.5;
    const numDivisions = 40;
    const titleMeshes = [];
    let numMeshes = 0;
    // animation settings
    const tweens1 = []; // array of tweens for title1
    const tweens2 = []; // array of tweens for title2
    const tweens3 = []; // array of tweens for title3

    function createCanvas() {
      scene = new THREE.Scene();
      camera = new THREE.OrthographicCamera(
        -sceneWidth / 2, sceneWidth / 2, sceneHeight / 2, -sceneHeight / 2, 0.01, 1000
      );
      camera.position.set(0, 0, 1);

      renderer = new THREE.WebGLRenderer({
        antialias: true,
        alpha: true,
        canvas: document.getElementById('project_title-canvas')
      }
      );
      renderer.setSize(width, height);
      renderer.setPixelRatio(dpr);

      const texture1 = createFontTexture({
        width: 1024,
        height: 256,
        fontSize: 80,
        text: "discover"
      });

      const texture2 = createFontTexture({
        width: 1024,
        height: 256,
        fontSize: 80,
        text: "fulmine"
      });

      const texture3 = createFontTexture({
        width: 1024,
        height: 256,
        fontSize: 80,
        text: 'branding'
      });

      createTitle({
        texture: texture1,
        tweens: tweens1
      });

      createTitle({
        texture: texture2,
        tweens: tweens2
      });

      createTitle({
        texture: texture3,
        tweens: tweens3
      });

      numMeshes = titleMeshes.length;

      animateTitle();
    }

    function createFontTexture(options) {
      const canvas = document.createElement('canvas');
      const width = options.width * dpr;
      const height = options.height * dpr;
      canvas.width = width;
      canvas.height = height;

      const ctx = canvas.getContext('2d');

      ctx.font = `400 ${options.fontSize * dpr}px 'Major Mono Display'`;
      ctx.textAlign = 'center';
      ctx.textBaseline = 'middle';
      ctx.fillStyle = '#F5F5F5';
      ctx.fillText(options.text, width / 2, height / 2 + 25);

      const texture = new THREE.CanvasTexture(canvas);
      texture.minFilter = THREE.LinearFilter;
      texture.magFilter = THREE.LinearFilter;
      texture.format = THREE.RGBAFormat;
      texture.needsUpdate = false;

      return texture;
    }

    function createTitle(params) {
      for (let i = 0; i < numDivisions; i++) {
        const dividedHeight = titleHeight / numDivisions;
        const geometry = new THREE.PlaneGeometry(titleWidth, dividedHeight);

        const material = new THREE.RawShaderMaterial({
          uniforms: {
            texture: { value: params.texture },
            time: { value: 0 },
            index: { value: i },
            divisions: { value: numDivisions },
            tOffsetX: { value: -1.0 },
            tween: { value: new THREE.Vector4(0, 0, 1, 1) }
          },

          vertexShader,
          fragmentShader,
          transparent: true
        });

        const y = -titleHeight * 0.5 + i * dividedHeight + dividedHeight * 0.5;

        const mesh = new THREE.Mesh(geometry, material);
        mesh.position.y = y;

        scene.add(mesh);
        titleMeshes.push(mesh);
        params.tweens.push(material.uniforms.tween.value);
      }
    }

    function animateTitle() {
      const tl = gsap.timeline({
        repeat: -1,
        defaults: {
          ease: "power3.inOut",
          duration: 0.8,
          stagger: 0.01
        }
      });

      const setTransformOffset = (titleIndex, value) => {
        const startIndex = titleIndex * numDivisions;
        const endIndex = startIndex + numDivisions;
        for (let i = startIndex; i < endIndex; i++) {
          titleMeshes[i].material.uniforms.tOffsetX.value = value;
        }
      };

      tl.to(tweens1, {
        x: 1.0,
        onStart: () => {
          setTransformOffset(0, -1.0);
        }
      },
        'start');
      tl.to(tweens1, {
        x: 0.0,
        onStart: () => {
          setTransformOffset(0, 1.0);
        }
      },
        'next1');
      tl.to(tweens2, {
        x: 1.0,
        onStart: () => {
          setTransformOffset(1, -1.0);
        }
      },
        'next1');
      tl.to(tweens2, {
        x: 0.0,
        onStart: () => {
          setTransformOffset(1, 1.0);
        }
      },
        'next2');
      tl.to(tweens3, {
        x: 1.0,
        onStart: () => {
          setTransformOffset(2, -1.0);
        }
      },
        'next2');
      tl.to(tweens3, {
        x: 0.0,
        onStart: () => {
          setTransformOffset(2, 1.0);
        }
      });
    }

    function updateCanvas() {
      requestAnimationFrame(updateCanvas);
      const time = performance.now() * 0.001;
      for (let i = 0; i < numMeshes; i++) {
        const mesh = titleMeshes[i];
        mesh.material.uniforms.time.value = time;
      }
      renderer.render(scene, camera);
    }

    $(document).ready(function () {
      var docWidth = $('body').width(),
        $wrap = $('#wrap'),
        $images = $('#wrap .section_D-container'),
        slidesWidth = $wrap.width();

      $(window).on('resize', function () {
        docWidth = $('body').width();
        slidesWidth = $wrap.width();
      })

      $(document).mousemove(function (e) {
        var mouseX = e.pageX,
          offset = mouseX / docWidth * slidesWidth - mouseX / 2;

        $images.css({
          '-webkit-transform': 'translate3d(' + -offset + 'px,0,0)',
          'transform': 'translate3d(' + -offset + 'px,0,0)'
        });
      });
    })
  }
} 
</script>

<style>
/* ===== Tailwind Modif ===== */
.z-10 {
  position: relative;
}

/* ===== Scrolling Rainbow ===== */
div.scrolling_rainbow {
  margin-top: 19px;
  position: relative;
}

.scrolling_rainbow-scroll {
  width: 100%;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  position: absolute;
}

.circle {
  width: 20px;
  height: 20px;
  border-radius: 40%;
  opacity: 0;
  margin: -19px auto;
  transition: transform 1s cubic-bezier(0.14, 0.15, 0.13, 0.99);
}

/* ===== Project ===== */
.project {
  max-width: 1300px;
  margin: 0 auto;
  padding: 0 8% 0 8%;
}

.section_A {
  max-width: 100%;
  margin: 20rem 0 20rem 0;
  border-bottom: 1px solid var(--light-gray);
}

.section_A h2 {
  font-size: var(--l);
  margin-bottom: 2rem;
}

p.project_subtitle {
  font-family: var(--display);
  font-size: var(--l);
  margin: 1rem 0 2rem 2rem;
  text-transform: lowercase;
  text-decoration: overline;
}

.section_B {
  text-align: right;
  margin: 20rem 0 20rem 0;
}

.section_B p.project_subtitle {
  margin: 1rem 2rem 2rem 0;
}

.section_C {
  margin: 20rem 0 20rem 0;
  padding: 0 8% 0 8%;
}

.section_C-content {
  display: flex;
  flex-direction: column;
  gap: 10rem;
}

.section_C-1 {
  text-align: left;
}

.section_C-2 {
  text-align: right;
}

.section_D {
  margin: 20rem 0 20rem 0;
  padding: 0 8% 0 8%;
  display: flex;
  flex-direction: column;
  gap: 10rem;
}

.section_D--mobile {
  display: flex;
}

.section_D--desktop {
  display: none;
}

.credits {
  display: none;
}

/* ===== Project Media ===== */
img.IMG_project {
  border: 1px solid var(--light);
  border-radius: 20px;
  padding: 1rem;
}

#wrap img {
  object-fit: contain;
}



/* ===== Tablet ===== */
@media only screen and (min-width: 768px) {

  /* ===== Project ===== */
  .project {
    max-width: 1300px;
    margin: 0 auto;
    padding: 0 8% 0 8%;
  }

  .section_A .project_container,
  .section_B .project_container {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    grid-gap: 3rem;
    align-items: center;
    justify-content: center;
    margin: 15rem 0 15rem 0;
  }

  .section_B {
    text-align: right;
  }

  .section_D {
    margin: 0;
    padding: 0;
  }

  .section_D-container {
    position: relative;
    width: 25%;
    z-index: 1;
    display: flex;
    align-items: center;
    z-index: 2;
    transform: scale(.97);
  }

  .section_D-item {
    position: relative;
    display: block;
    max-width: 90%;
  }

  .section_D-item img {
    position: relative;
    display: block;
    width: 100%;
    height: auto;
    z-index: 2;
  }

  .section_D--mobile {
    display: none;
  }

  .section_D--desktop {
    display: flex;
  }

  #wrap {
    left: 0;
    top: 0;
    width: 150%;
    height: 100%;
    display: flex;
    flex-direction: row;
    align-items: stretch;
    margin: 20rem 25%;
    gap: 0;
  }

  .section_D-container:hover .IMG_project-description {
    opacity: 1;
    transform: scaleY(1) translateY(0);
  }

  .credits {
    display: block;
    position: fixed;
    bottom: 0;
    right: 0;
    padding: 1.5em;
    font-size: .8em;
    text-align: right;
    opacity: .6;
    transition: opacity .2;
    z-index: 3;
  }

  .credits:hover {
    text-decoration: underline;
    opacity: 1;
  }

  /* ===== Project Media ===== */
  .IMG_project-description {
    position: absolute;
    top: 100%;
    left: 10%;
    width: 80%;
    opacity: 0;
    padding: 1em 0 0 1em;
    border-left: 1px solid;
    z-index: 1;
    transform: scaleY(1) translateY(-50px);
    transition: transform .2s, opacity .5s;
  }



  /* ===== Desktop ===== */
  @media only screen and (min-width: 1025px) {

    .section_C {
      height: 100%;
      padding: 0;
    }

    .section_C .section_C-content {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      grid-gap: 50px;
      margin: 10rem auto 20rem auto;
      padding: 0 8% 0 8%;
      text-align: center;
      place-items: center;
    }
  }
}
</style>